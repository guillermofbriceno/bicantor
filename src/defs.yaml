- type: plain_def
  values:
    - "NOP": 32'b0
      "RS1_ENC": "19:15"
      "RS2_ENC": "24:20"
      "RD_ENC" : "11:07"
      "F7_ENC" : "31:25"
      "F3_ENC" : "14:12"
      "U_IMM_ENC(in)" : "{in[31:12], 12'b0}"
      "I_IMM_ENC(in)" : "{{22{in[31]}}, in[30:20]}"
      "S_IMM_ENC(in)" : "{{22{in[31]}}, in[31:25], in[11:7]}"
      "B_IMM_ENC(in)" : "{{20{in[31]}}, in[7], in[30:25], in[11:8], 1'b0}"
      "J_IMM_ENC(in)" : "{{12{in[31]}}, in[19:12], in[20], in[30:25], in[24:21], 1'b0}"

      "CHAN(l,n)"     : "( (l * (n+1)) - 1 ) : ( l * n )"

      "TAG_RANGE(abits)" : "31:(31 - (29 - abits))"
      "IDX_RANGE(abits)" : "(31 - (29 - abits) - 1):2"

      "BEQ":  "3'b000"
      "BNE":  "3'b001"
      "BLT":  "3'b100"
      "BGE":  "3'b101"
      "BLTU": "3'b110"
      "BGEU": "3'b111"

      "RVFI_BUS":   "31:0"

- type: enum
  values:
    - "TEMP2"
    - "TEMP3"
    - "TEMP4"

- type: mux
  mux_name: "PC_MUX"
  signals:
    - "PC_MUX_P8"
    - "TEMP5"
    - "TEMP6"

- type: enc_bus
  bus_name: "RVFI_BUS"
  values:
    - "RVFI_ORDER":     64
      "RVFI_INSN":      32
      "RVFI_PC_RDATA":  32
      "RVFI_PC_WDATA":  32
      "RVFI_RS1_ADDR":  5
      "RVFI_RS2_ADDR":  5
      "RVFI_RS1_DATA":  32
      "RVFI_RS2_DATA":  32

- type: mux
  mux_name: "BYPASS_MUX"
  signals:
    - "BYPASS_NONE"
    - "BYPASS_LSU0"
    - "BYPASS_LSU1"
    - "BYPASS_WB0"
    - "BYPASS_WB1"

- type: control_bus
  name: "CTRL_BUS"
  muxes:
    - mux_name: "ALU_SRC1_MUX"
      signals:
        - "U_IMM_SEL"
        - "RS1_SEL"

    - mux_name: "ALU_SRC2_MUX"
      signals:
        - "I_IMM_SEL"
        - "S_IMM_SEL"
        - "PC_SEL"
        - "RS2_SEL"

    - mux_name: "WB_MUX"
      signals:
        - "ALU_SEL"
        - "PC_P4_SEL"

  control_signals:
    - "RS1_ACTIVE"
    - "RS2_ACTIVE"
    - "REGWRITE"
    - "COND_BRANCH"
    - "ISSUE_PRI"
    - "ISSUE_SLOT"
    - "FUNCT7_SEL"
    - "FUNCT3_SEL"
    - "JAL"
    - "JALR"
    - "COND_BRANCH"
    - "INVALID"
  
  operation_codes:
    "ALUI":
      - opcode:         "0010011"
        "REGWRITE":     1
        "RS1_ACTIVE":   1
        "FUNCT3_SEL":   1
        "ALU_SRC1_MUX": "RS1_SEL"
        "ALU_SRC2_MUX": "I_IMM_SEL"
        "WB_MUX":       "ALU_SEL"

    "ALUR":
      - opcode:         "0110011"
        "RS1_ACTIVE":   1
        "RS2_ACTIVE":   1
        "REGWRITE":     1
        "FUNCT3_SEL":   1
        "FUNCT7_SEL":   1
        "ALU_SRC1_MUX": "RS1_SEL"
        "ALU_SRC2_MUX": "RS2_SEL"
        "WB_MUX":       "ALU_SEL"

    "LUI":
      - opcode:         "0110111"
        "REGWRITE":     1
        "ALU_SRC1_MUX": "U_IMM_SEL"
        "ALU_SRC2_MUX": "RS2_SEL"
        "WB_MUX":       "ALU_SEL"

    "AUIPC":
      - opcode:         "0010111"
        "REGWRITE":     1
        "ALU_SRC1_MUX": "U_IMM_SEL"
        "ALU_SRC2_MUX": "PC_SEL"
        "WB_MUX":       "ALU_SEL"

    "JAL":
      - opcode:         "1101111"
        "REGWRITE":     1
        "JAL":          1
        "ISSUE_PRI":    1
        "ISSUE_SLOT":   0
        "WB_MUX":       "PC_P4_SEL"

    "JALR":
      - opcode:         "1100111"
        "REGWRITE":     1
        "JALR":         1
        "RS1_ACTIVE":   1
        "ALU_SRC1_MUX": "RS1_SEL"
        "ISSUE_PRI":    1
        "ISSUE_SLOT":   0
        "WB_MUX":       "PC_P4_SEL"

    "BRANCH":
      - opcode:         "1100011"
        "COND_BRANCH":  1
        "FUNCT3_SEL":   1
        "ALU_SRC1_MUX": "RS1_SEL"
        "ALU_SRC2_MUX": "RS2_SEL"
        "RS1_ACTIVE":   1
        "RS2_ACTIVE":   1
        "ISSUE_PRI":    1
        "ISSUE_SLOT":   0

    "INVALID_INST":
      - opcode:         "XXXXXXX"
        "INVALID":      1
